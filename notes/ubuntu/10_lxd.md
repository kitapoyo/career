# LXD
1. [LXD とは](#anchor1)
   - 特徴
2. [インストール](#anchor2)
   - 初期設定
3. [コンテナ](#anchor3)
   - 作成
   - コンテナ一覧
   - ログイン
   - ローカルからコンテナへ
   - コンテナからローカルへ
   - コンテナ停止
   - コンテナ削除
4. [コンテナイメージ](#anchor4)
   - 表示
   - 削除

<a id="anchor1"></a>

## 1. LXD とは
 - LXC を利用して、複数のホスト上で稼働しているコンテナをネットワーク経由で管理できる仕組みです。

### 特徴
 - コンテナ技術に LXC を使用
 - あらかじめビルドされたディストリビューションイメージを利用可能
 - コンテナには個別で IP アドレスを割り当て可能
 - CPU の仮想化支援機能が無くても利用できる
 - Linux のみ対応している
 - LXD クライアントツールはローカル・リモートどちらに対しても同じように動作する
 - ホスト間でコンテナやイメージを転送できる

<a id="anchor2"></a>

## 2. インストール

 ```:コマンド
 sudo apt -y install lxd lxd-client
 ```

### 初期設定
 - ストレージやネットワーク環境についての初期設定が必要です。` lxd init ` コマンドを実行して設定します。
 - 設定後、ネットワークインターフェースに **lxdbr0** が追加されます。
1. コマンド実行

    ```:コマンド
    sudo lxd init
    ```

2. 対話モードで設定を指定<br>コンテナの保存先を新しく作成するか問われます。
3. ストレージバックエンドを指定します。( dir , zfs )
4. ネットワークインターフェース名を指定します。

<a id="anchor3"></a>

## 3. コンテナ

### 作成
 - イメージを提供するリモートサーバーは以下の３つがデフォルトで登録されています。
1. ubuntu ( ubuntu イメージ用 )
2. ubuntu-daily ( daily build イメージ用 )
3. images ( その他ディストリビューション用 )

    ```:コマンド
    lxc launch < リモートサーバー名:バージョン > [ コンテナ名 ]
    ```


### コンテナ一覧

 ```:コマンド
 lxc list
 ```

### ログイン

 ```:コマンド
 lxc exec < コンテナ名 > [ 実行コマンド ]
 ```

### ローカルからコンテナへ

 ```:コマンド
 lxc file push < ファイル名 > < コンテナ名とパス >
 ```

### コンテナからローカルへ

 ```:コマンド
 lxc file pull < コンテナ名とパス > < ローカルのディレクトリ >
 ```

### コンテナ停止

 ```:コマンド
 lxc stop < コンテナ名 >
```

### コンテナ削除

 ```:コマンド
 lxc delete < コンテナ名 >
 ```

<a id="anchor4"></a>

## 4. コンテナイメージ

### 表示

 ```:コマンド
 lxc image list
 ```

### 削除

 ```:コマンド
 lxc image delete < フィンガープリント >
 ```
