# 名前解決
1. [hosts ファイル](#anchor1)
2. [ネームサービススイッチ ( /etc/nsswitch.conf )](#anchor2)
3. [dig コマンド](#anchor3)

<a id="anchor1"></a>

## 1. hosts ファイル
 - **/etc/hosts** ファイルに設定を記述します。ホスト名は複数指定できます。

    ```:書式
    IP アドレス ホスト名１ [ ホスト名２ ]
    ```

<a id="anchor2"></a>

## 2. ネームサービススイッチ ( /etc/nsswitch.conf )
 - ホスト名と IP アドレスを名前解決する手段はいくつか存在します。
1. **/etc/hosts** ファイルを使用する。
2. DNS サーバーに問い合わせる。
3. LDAP ( 認証 ) サーバーに問い合わせる。
 - これらをどういう順序で利用するかを記述したファイルが **/etc/nsswitch.conf** ファイルです。

 - ホストの名前解決でローカルの /etc/hosts で見つからない場合は、DNS サーバーに問い合わせる場合

    ```:設定例
    # /etc/nsswitch.conf
    hosts:          files dns
    ```

<a id="anchor3"></a>

## 3. dig コマンド
 - DNS サーバーに問い合わせて名前解決を行うコマンドです。

### 書式

 ```:コマンド
 dig [ オプション ] [ @DNS サーバー ] < ホスト名 | ドメイン名 | IP アドレス > [ クエリタイプ ]
 ```

### 引数

|引数|説明|
|----|----|
|@DNS サーバー|問い合わせ先の DNS サーバーを指定する|
|ホスト名・ドメイン名|問い合わせたいホスト名やドメイン名を指定する|
|IP アドレス|問い合わせたい IP アドレスを指定する ( -x オプションが必要 )|
|クエリタイプ|検索タイプ ( DNS 問い合わせタイプ・クエリタイプ ) を指定する ( デフォルトは "a" )|

### オプション

|オプション|説明|
|---|---|
|-x|逆引きで問い合わせます。|
|-p ポート|問い合わせ先のポート番号を指定します。|
|+short|簡潔に表示します。|

### クエリタイプ

|クエリタイプ|説明|
|----|----|
|a|ホスト名に対応する IP アドレス ( デフォルト )|
|ptr|IP アドレスに対応するホスト名|
|ns|DNS サーバー|
|mx|メールサーバー|
|soa|SOA レコード情報|
|hinfo|ホスト情報|
|axfr|ゾーン転送|
|txt|任意の文字列|
|any|すべての情報|
