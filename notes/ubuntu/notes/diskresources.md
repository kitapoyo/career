# ディスクリソースの管理コマンド
1. [df コマンド](#anchor1)
2. [iostat コマンド](#anchor2)
3. [iotop コマンド](#anchor3)

<a id="anchor2"></a>

## 1. df コマンド
 - ディスクの使用量や使用割合を表示します。
 - 引数にディレクトリを指定すると、そのディレクトリが含まれるファイルシステムを表示します。

### 書式

 ```:コマンド
 df [ オプション ] < ディレクトリ >
 ```

### オプション

|オプション|説明|
|---|---|
|-a|すべてのファイルシステムを表示します。|
|--total|合計を表示します。|
|-h|読みやすい単位で表示します。( ２の累乗 )|
|-H|読みやすい単位で表示します。( １０の累乗 )|
|-i|i ノード単位で表示します。|
|-k|K バイト単位で表示します。|
|-l|ローカルファイルシステムに限定して表示します。|
|-t タイプ|指定したタイプのファイルシステムに限定して表示します。|
|-T|ファイルシステムのタイプを表示します。|

<a id="anchor2"></a>

## 2. iostat コマンド
 - ディスクの入出力をリアルタイムに監視します。どのストレージに負荷が集中しているかなどを調べます。
 - **sysstat** パッケージに含まれているため、パッケージをインストールする必要があります。

### インストール

 ```:コマンド
 sudo apt -y install sysstat
 ```

### 書式

 ```:コマンド
 iostat [ オプション ] [ 表示間隔 ( 秒 ) ] [ 回数 ]
 ```

### オプション

|オプション|説明|
|---|---|
|-c|CPU 情報のみ表示します。|
|-d|ディスク情報のみ表示します。|
|-h|読みやすい形式でディスク情報を表示します。|
|-k|K バイト単位で表示します。|
|-m|M バイト単位で表示します。|
|-t|時間を表示します。|

### 表示項目

 ```:表示例
 avg-cpu:  %user   %nice %system %iowait  %steal   %idle
                   3.62    0.82        1.57       1.03     0.00   92.97

 Device             tps    kB_read/s    kB_wrtn/s     kB_read     kB_wrtn
 sda              42.38        719.78         684.56    1723439    1639128
 dm-0           62.79        690.14         748.29    1652481    1791716
 ```

|Item|説明|
|---|---|
|%user|ユーザープロセスの CPU 使用率|
|%nice|優先度付きプロセスの CPU 使用率|
|%system|カーネルの CPU 使用率|
|%iowait|ディスク I / O 待ち時間の割合|
|%steal|ゲスト OS が CPU を割り当てられなかった時間の割合|
|%idle|CPU がアイドル状態の時間の割合|
|tps|I / O 転送リクエスト数 / 秒|
|kB_read/s|ディスクからの読み取り量 ( KB / 秒 )|
|kB_wrtn/s|ディスクへの書き込み量 ( KB / 秒 )|
|kB_read|ディスクからの読み取り量 ( KB )|
|kB_wrtn|ディスクへの書き込み量 ( KB )|

<a id="anchor3"></a>

## 3. iotop コマンド
 - プロセスごとのディスク入出力情報を **top** コマンドと同じように表示します。

### インストール

 ```:コマンド
 sudo apt -y install iotop
 ```

### 書式

 ```:コマンド
 iotop [ オプション ]
 ```

### オプション

|オプション|説明|
|---|---|
|-b|対話モードではなくバッチモードで表示します。|
|-n 回数|出力を更新する回数を指定します。|
|-d 秒|出力への更新間隔を設定します。デフォルトは１秒です。|
|-q|ヘッダを出力しません。|
