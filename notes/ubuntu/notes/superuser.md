# スーパーユーザー
1. [スーパーユーザー とは](#anchor1)
2. [システムユーザー とは](#anchor2)
3. [一般ユーザー とは](#anchor3)
4. [sudo コマンド](#anchor4)
5. [sudo 設定 ( visudo )](#anchor5)

<a id="anchor1"></a>

## 1. スーパーユーザー とは
 - システム唯一の特権ユーザーであり、すべてのアクセス制御を無視できます。
 - UbuntuServer の root ユーザーログインはデフォルトで禁止されています。<br>ユーザー名：**root**<br>ユーザー ID ：**０**

<a id="anchor2"></a>

## 2. システムユーザー とは
 - 各種サーバープログラムやシステムプログラムを実行する際に使用するユーザーです。
 - ログインはできません。基、ログインに使用してはいけません。
 - ユーザー ID ：**０ ~ ９９** が主に割り当てられます。

<a id="anchor3"></a>

## 3. 一般ユーザー とは
 - システムの利用者で、システム全体に影響が出たり、他のユーザーに干渉する操作はできません。
 - システムを管理するため、最低１ユーザーは必要です。
 - ユーザー ID ：**１０００ ~** 以降が割り当てられます。

<a id="anchor4"></a>

## 4. sudo コマンド
 - 一般ユーザーが管理者権限が必要なコマンドを実行する際に使用します。
 - 任意の管理者コマンドのみを任意のユーザーに許可するといったこともできます。
 - コマンド実行のログが記録されるため、監査する際に役に立ちます。**/var/log/auth.log** に記録されます。
 - 実行時にパスワードを求められますが、 **sudo を実行しているユーザーのパスワード**です。

     ```:コマンド
     sudo [ オプション ] 実行したいコマンド
     ```

### オプション

|オプション|説明|
|---|---|
|-i|指定したユーザーでログインシェルを起動します。|
|-s|指定したユーザーでシェルを起動します。|

### ログ表示

 ```:コマンド
 cat /var/log/auth.log
 ```

<a id="anchor5"></a>

## 5. sudo 設定 ( visudo )
 - **/etc/sudores** ファイルを設定します。このファイルを直接エディタで開いてはいけません。<br>必ず ` visudo ` コマンドで編集します。
 - システムのインストール後にこのコマンドを実行できるのは、インストール時に作成したユーザーのみです。

    ```:コマンド
    sudo visudo
    ```

 - /etc/sudoers ファイル形式

     ```:書式
     ユーザー名 ホスト名=( 実行ユーザー ) [ NOPASSWD: ] コマンド
     ```
    - **ユーザー名**  ：コマンドの実行を許可するユーザー名・グループ名を指定します。もしくは **ALL** を指定します。
    - **ホスト名**  ：実行を許可するホスト名・IP アドレスを指定します。もしくは **ALL** を指定します。
    - **実行ユーザー**  ：コマンド実行時のユーザー ( 省略時は root ) を指定します。もしくは **ALL** を指定します。
    - **コマンド**  ：実行を許可するコマンドのパスを指定します。もしくは **ALL** を指定します。
    - **NOPASSWD:**  ：指定すると、コマンド実行時にパスワードを要求されなくなります。

### hoge ユーザーに dhclient コマンドを許可する場合

 ```:コマンド
 hoge ALL=(ALL) /sbin/dhclient
 ```

### hoge ユーザーにすべての管理者権限コマンドを許可する場合

 ```:コマンド
 hoge ALL=(ALL) ALL
 ```

### admin グループにすべての管理者権限コマンドをパスワード無しで許可する場合

 ```:コマンド
 %admin ALL=(ALL) NOPASSWD:ALL
 ```
